{{ $experiment := .Get "experiment" | default "button-color" }}
{{ $variant := .Get "variant" | default "control" }}

<div class="ab-test-demo" data-experiment="{{ $experiment }}" data-variant="{{ $variant }}">
    <h3>üß™ A/B Test Demo</h3>
    <p>Este √© um exemplo de A/B testing. Diferentes usu√°rios ver√£o diferentes vers√µes.</p>
    
    <div class="ab-test-controls">
        <button class="btn btn-primary" onclick="trackABConversion('{{ $experiment }}', 'click')">
            Teste A - Azul
        </button>
        <button class="btn btn-success" onclick="trackABConversion('{{ $experiment }}', 'click')">
            Teste B - Verde
        </button>
    </div>
    
    <div class="ab-test-info">
        <p><strong>Experimento:</strong> {{ $experiment }}</p>
        <p><strong>Variante Atual:</strong> <span id="current-variant">{{ $variant }}</span></p>
        <p><strong>User ID:</strong> <span id="user-id"></span></p>
    </div>
    
    <script>
        // Update variant display
        document.getElementById('current-variant').textContent = '{{ $variant }}';
        document.getElementById('user-id').textContent = localStorage.getItem('ab_user_id') || 'N√£o definido';
        
        // Track conversion function
        function trackABConversion(experiment, conversionType) {
            if (window.ABTesting) {
                window.ABTesting.trackConversion(experiment, conversionType);
                showToast('Convers√£o registrada: ' + conversionType, 'success');
            } else {
                showToast('A/B Testing n√£o dispon√≠vel', 'error');
            }
        }
    </script>
</div>